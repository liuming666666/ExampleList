{"version":3,"sources":["../../../../../../../assets/cases/05_scripting/07_asset_loading/LoadRes/assets/cases/05_scripting/07_asset_loading/LoadRes/LoadRes_example.js"],"names":["cc","Class","extends","Component","properties","content","Node","_url","onLoad","loadSpriteFrame","url","_releaseResource","SpriteAtlas","loader","loadRes","err","atlas","_removeAllChildren","setAutoRelease","node","addChild","position","v2","sprite","addComponent","Sprite","spriteFrame","getSpriteFrame","loadPrefab","Prefab","prefab","instantiate","removeAllChildren","type","res","getRes","all","getDependsRecursively","release"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAASL,GAAGM,IADJ;AAERC,cAAK;AAFG,KAHP;;AAQLC,YAAQ,kBAAY;AAChB,aAAKD,IAAL,GAAY,CAAC,mBAAD,EAAsB,oBAAtB,CAAZ;AACH,KAVI;;AAYLE,qBAAiB,2BAAY;AAAA;;AACzB,YAAIC,MAAM,KAAKH,IAAL,CAAU,CAAV,CAAV;AACA,aAAKI,gBAAL,CAAsBD,GAAtB,EAA2BV,GAAGY,WAA9B;AACAZ,WAAGa,MAAH,CAAUC,OAAV,CAAkBJ,GAAlB,EAAuBV,GAAGY,WAA1B,EAAuC,UAACG,GAAD,EAAMC,KAAN,EAAgB;AACnD,kBAAKC,kBAAL;AACAjB,eAAGa,MAAH,CAAUK,cAAV,CAAyBF,KAAzB,EAAgC,IAAhC;AACA,gBAAIG,OAAO,IAAInB,GAAGM,IAAP,EAAX;AACA,kBAAKD,OAAL,CAAae,QAAb,CAAsBD,IAAtB;AACAA,iBAAKE,QAAL,GAAgBrB,GAAGsB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhB;AACA,gBAAIC,SAASJ,KAAKK,YAAL,CAAkBxB,GAAGyB,MAArB,CAAb;AACAF,mBAAOG,WAAP,GAAqBV,MAAMW,cAAN,CAAqB,aAArB,CAArB;AACH,SARD;AASH,KAxBI;;AA0BLC,gBAAY,sBAAY;AAAA;;AACpB,YAAIlB,MAAM,KAAKH,IAAL,CAAU,CAAV,CAAV;AACA,aAAKI,gBAAL,CAAsBD,GAAtB,EAA2BV,GAAG6B,MAA9B;AACA7B,WAAGa,MAAH,CAAUC,OAAV,CAAkBJ,GAAlB,EAAuBV,GAAG6B,MAA1B,EAAkC,UAACd,GAAD,EAAMe,MAAN,EAAiB;AAC/C,mBAAKb,kBAAL;AACAjB,eAAGa,MAAH,CAAUK,cAAV,CAAyBY,MAAzB,EAAiC,IAAjC;AACA,gBAAIX,OAAOnB,GAAG+B,WAAH,CAAeD,MAAf,CAAX;AACA,mBAAKzB,OAAL,CAAae,QAAb,CAAsBD,IAAtB;AACAA,iBAAKE,QAAL,GAAgBrB,GAAGsB,EAAH,CAAM,CAAN,EAAS,CAAT,CAAhB;AACH,SAND;AAOH,KApCI;;AAsCLL,wBAAoB,8BAAY;AAC5B,aAAKZ,OAAL,CAAa2B,iBAAb,CAA+B,IAA/B;AACH,KAxCI;;AA0CLrB,sBAAkB,0BAAUD,GAAV,EAAeuB,IAAf,EAAqB;AACnC,aAAKhB,kBAAL;AACA,YAAIiB,MAAMlC,GAAGa,MAAH,CAAUsB,MAAV,CAAiBzB,GAAjB,EAAsBuB,IAAtB,CAAV;AACA,YAAIG,MAAMpC,GAAGa,MAAH,CAAUwB,qBAAV,CAAgCH,GAAhC,CAAV;AACAlC,WAAGa,MAAH,CAAUyB,OAAV,CAAkBF,GAAlB;AACH;AA/CI,CAAT","file":"LoadRes_example.js","sourceRoot":"../../../../../../../assets/cases/05_scripting/07_asset_loading/LoadRes","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        content: cc.Node,\n        _url:[]\n    },\n\n    onLoad: function () {\n        this._url = [\"test assets/atlas\", \"test assets/prefab\"];\n    },\n\n    loadSpriteFrame: function () {\n        var url = this._url[0];\n        this._releaseResource(url, cc.SpriteAtlas);\n        cc.loader.loadRes(url, cc.SpriteAtlas, (err, atlas) => {\n            this._removeAllChildren();\n            cc.loader.setAutoRelease(atlas, true);\n            var node = new cc.Node();\n            this.content.addChild(node);\n            node.position = cc.v2(0, 0);\n            var sprite = node.addComponent(cc.Sprite);\n            sprite.spriteFrame = atlas.getSpriteFrame('sheep_run_0');\n        });\n    },\n\n    loadPrefab: function () {\n        var url = this._url[1];\n        this._releaseResource(url, cc.Prefab);\n        cc.loader.loadRes(url, cc.Prefab, (err, prefab) => {\n            this._removeAllChildren();\n            cc.loader.setAutoRelease(prefab, true);\n            var node = cc.instantiate(prefab);\n            this.content.addChild(node);\n            node.position = cc.v2(0, 0);\n        });\n    },\n\n    _removeAllChildren: function () {\n        this.content.removeAllChildren(true);\n    },\n\n    _releaseResource: function (url, type) {\n        this._removeAllChildren();\n        var res = cc.loader.getRes(url, type);\n        var all = cc.loader.getDependsRecursively(res);\n        cc.loader.release(all);\n    }\n});\n"]}