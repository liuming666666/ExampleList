{"version":3,"sources":["../../../../../../../assets/cases/05_scripting/07_asset_loading/LoadResDir/assets/cases/05_scripting/07_asset_loading/LoadResDir/loadResDir_example.js"],"names":["cc","Class","extends","Component","properties","btnClearAll","Node","label","Prefab","scrollView","ScrollView","_init","_assets","_hasLoading","content","height","active","onLoad","_createLabel","text","node","instantiate","getComponent","Label","textKey","addChild","_clear","removeAllChildren","i","length","asset","_uuid","loader","release","onClearAll","onLoadAll","scrollToTop","loadResDir","err","assets","isValid","url","_name","onLoadSpriteFrameAll","SpriteFrame"],"mappings":"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","file":"loadResDir_example.js","sourceRoot":"../../../../../../../assets/cases/05_scripting/07_asset_loading/LoadResDir","sourcesContent":["cc.Class({\n    extends: cc.Component,\n\n    properties: {\n        btnClearAll: cc.Node,\n        label: cc.Prefab,\n        scrollView: cc.ScrollView\n    },\n\n    _init: function () {\n        this._assets = [];\n        this._hasLoading = false;\n        this.scrollView.content.height = 0;\n        this.btnClearAll.active = false;\n    },\n\n    onLoad: function () {\n        this._init();\n    },\n\n    _createLabel: function (text) {\n        var node = cc.instantiate(this.label);\n        var label = node.getComponent(cc.Label);\n        label.textKey = text;\n        this.scrollView.content.addChild(node);\n    },\n\n    _clear: function () {\n        this.scrollView.content.removeAllChildren(true);\n        for (var i = 0; i < this._assets.length; ++i) {\n            var asset = this._assets[i];\n            // 目前载入 plist 后的 Object 资源没有包含 _uuid 所以无法 release（PS：1.5 版本会加 _uuid）\n            // 暂时过滤 Object 并且没有 _uuid 类型的资源\n            if (typeof asset === 'object' && !asset._uuid) {\n                continue;\n            }\n            cc.loader.release(this._assets[i]);\n        }\n    },\n\n    onClearAll: function () {\n        this.scrollView.content.height = 0;\n        this.btnClearAll.active = false;\n        this._clear();\n    },\n\n    onLoadAll: function () {\n        if (this._hasLoading) { return; }\n        this._hasLoading = true;\n        this._clear();\n        this._createLabel(\"Load All Assets\");\n        this.scrollView.scrollToTop();\n        cc.loader.loadResDir(\"test assets\", (err, assets) => {\n            if (!this.isValid) {\n                return;\n            }\n\n            this._assets = assets;\n            var text = \"\";\n            for (var i = 0; i < assets.length; ++i) {\n                if (typeof assets[i] === 'string') {\n                    text = assets[i]\n                }\n                else {\n                    text = assets[i].url || assets[i]._name || assets[i];\n                }\n                if (typeof text !== 'string' ) {\n                    continue;\n                }\n                this._createLabel(text);\n            }\n            this._hasLoading = false;\n            this.btnClearAll.active = true;\n        });\n    },\n\n    onLoadSpriteFrameAll: function () {\n        if (this._hasLoading) { return; }\n        this._hasLoading = true;\n        this._clear();\n        this._createLabel(\"Load All Sprite Frame\");\n        this.scrollView.scrollToTop();\n        cc.loader.loadResDir(\"test assets\", cc.SpriteFrame, (err, assets) => {\n            if (!this.isValid) {\n                return;\n            }\n            this._assets = assets;\n            var text = \"\";\n            for (var i = 0; i < assets.length; ++i) {\n                if (typeof assets[i] === 'string' ) {\n                    text = assets[i]\n                }\n                else {\n                    text = assets[i].url || assets[i]._name || assets[i];\n                }\n                this._createLabel(text);\n            }\n            this._hasLoading = false;\n            this.btnClearAll.active = true;\n        });\n    }\n\n});\n"]}