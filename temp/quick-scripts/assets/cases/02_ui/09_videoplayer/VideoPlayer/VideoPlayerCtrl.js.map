{"version":3,"sources":["VideoPlayerCtrl.js"],"names":["cc","Class","extends","Component","properties","videoPlayer","default","type","VideoPlayer","statusLabel","Label","currentTime","totalTime","play","pause","toggleFullscreen","sys","isBrowser","browserType","BROWSER_TYPE_MOBILE_QQ","browserVersion","test","navigator","userAgent","log","isFullscreen","stop","keepRatioSwitch","keepAspectRatio","onVideoPlayerEvent","sender","event","string","EventType","META_LOADED","getDuration","toFixed","CLICKED","isPlaying","toggleVisibility","enabled","playOnlineVideo","resourceType","url","update","parseFloat"],"mappings":";;;;;;AAAAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,qBAAa;AACTC,qBAAS,IADA;AAETC,kBAAMP,GAAGQ;AAFA,SADL;AAKRC,qBAAa;AACTH,qBAAS,IADA;AAETC,kBAAMP,GAAGU;AAFA,SALL;AASRC,qBAAa;AACTL,qBAAS,IADA;AAETC,kBAAMP,GAAGU;AAFA,SATL;AAaRE,mBAAW;AACPN,qBAAS,IADF;AAEPC,kBAAMP,GAAGU;AAFF;AAbH,KAHP;;AAuBLG,UAAM,gBAAW;AACb,aAAKR,WAAL,CAAiBQ,IAAjB;AACH,KAzBI;;AA2BLC,WAAO,iBAAW;AACd,aAAKT,WAAL,CAAiBS,KAAjB;AACH,KA7BI;;AA+BLC,sBAAkB,4BAAW;AACzB,YACIf,GAAGgB,GAAH,CAAOC,SAAP,IACAjB,GAAGgB,GAAH,CAAOE,WAAP,KAAuBlB,GAAGgB,GAAH,CAAOG,sBAD9B,IAEAnB,GAAGgB,GAAH,CAAOI,cAAP,IAAyB,GAFzB,IAGA,UAAUC,IAAV,CAAeC,UAAUC,SAAzB,CAJJ,EAKE;AACE,mBAAOvB,GAAGwB,GAAH,CAAO,uCAAP,CAAP;AACH;AACD,aAAKnB,WAAL,CAAiBoB,YAAjB,GAAgC,IAAhC;AACH,KAzCI;;AA2CLC,UAAM,gBAAW;AACb,aAAKrB,WAAL,CAAiBqB,IAAjB;AACH,KA7CI;;AA+CLC,qBAAiB,2BAAW;AACxB,aAAKtB,WAAL,CAAiBuB,eAAjB,GAAmC,CAAC,KAAKvB,WAAL,CAAiBuB,eAArD;AACH,KAjDI;;AAmDLC,wBAAoB,4BAASC,MAAT,EAAiBC,KAAjB,EAAwB;AACxC,aAAKtB,WAAL,CAAiBuB,MAAjB,GAA0BD,KAA1B;AACA,YAAIA,UAAU/B,GAAGQ,WAAH,CAAeyB,SAAf,CAAyBC,WAAvC,EAAoD;AAChD,iBAAKtB,SAAL,CAAeoB,MAAf,GAAwB,KAAK3B,WAAL,CAAiB8B,WAAjB,GAA+BC,OAA/B,CAAuC,CAAvC,CAAxB;AACH,SAFD,MAEO,IAAIL,UAAU/B,GAAGQ,WAAH,CAAeyB,SAAf,CAAyBI,OAAvC,EAAgD;AACnD,gBAAG,KAAKhC,WAAL,CAAiBiC,SAAjB,EAAH,EAAiC;AAC7B,qBAAKjC,WAAL,CAAiBS,KAAjB;AACH,aAFD,MAEO;AACH,qBAAKT,WAAL,CAAiBQ,IAAjB;AACH;AACJ;AACJ,KA9DI;;AAgEL0B,sBAAkB,4BAAW;AACzB,aAAKlC,WAAL,CAAiBmC,OAAjB,GAA2B,CAAC,KAAKnC,WAAL,CAAiBmC,OAA7C;AACH,KAlEI;;AAoELC,qBAAiB,2BAAW;AACxB,aAAKpC,WAAL,CAAiBqC,YAAjB,GAAgC,CAAhC;AACA,aAAKrC,WAAL,CAAiBsC,GAAjB,GAAuB,+CAAvB;AACA,aAAKtC,WAAL,CAAiBQ,IAAjB;AACH,KAxEI;;AA0EL+B,YAAQ,kBAAY;AAChB,YAAI,KAAKjC,WAAT,EACI,KAAKA,WAAL,CAAiBqB,MAAjB,GAA0Ba,WAAW,KAAKxC,WAAL,CAAiBM,WAAjB,CAA6ByB,OAA7B,CAAqC,CAArC,CAAX,CAA1B;AACP;;AA7EI,CAAT","file":"VideoPlayerCtrl.js","sourceRoot":"../../../../../../../assets/cases/02_ui/09_videoplayer/VideoPlayer","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        videoPlayer: {\r\n            default: null,\r\n            type: cc.VideoPlayer\r\n        },\r\n        statusLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        currentTime: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        totalTime: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n\r\n    play: function() {\r\n        this.videoPlayer.play();\r\n    },\r\n\r\n    pause: function() {\r\n        this.videoPlayer.pause();\r\n    },\r\n\r\n    toggleFullscreen: function() {\r\n        if (\r\n            cc.sys.isBrowser &&\r\n            cc.sys.browserType === cc.sys.BROWSER_TYPE_MOBILE_QQ &&\r\n            cc.sys.browserVersion <= 7.2 &&\r\n            /Nexus 6/.test(navigator.userAgent)\r\n        ) {\r\n            return cc.log('May be crash, so prohibit full screen');\r\n        }\r\n        this.videoPlayer.isFullscreen = true;\r\n    },\r\n\r\n    stop: function() {\r\n        this.videoPlayer.stop();\r\n    },\r\n\r\n    keepRatioSwitch: function() {\r\n        this.videoPlayer.keepAspectRatio = !this.videoPlayer.keepAspectRatio; \r\n    },\r\n\r\n    onVideoPlayerEvent: function(sender, event) {\r\n        this.statusLabel.string = event;\r\n        if (event === cc.VideoPlayer.EventType.META_LOADED) {\r\n            this.totalTime.string = this.videoPlayer.getDuration().toFixed(2);\r\n        } else if (event === cc.VideoPlayer.EventType.CLICKED) {\r\n            if(this.videoPlayer.isPlaying()) {\r\n                this.videoPlayer.pause();\r\n            } else {\r\n                this.videoPlayer.play();\r\n            }\r\n        }\r\n    },\r\n\r\n    toggleVisibility: function() {\r\n        this.videoPlayer.enabled = !this.videoPlayer.enabled;\r\n    },\r\n\r\n    playOnlineVideo: function() {\r\n        this.videoPlayer.resourceType = 0;\r\n        this.videoPlayer.url = \"http://benchmark.cocos2d-x.org/cocosvideo.mp4\";\r\n        this.videoPlayer.play();\r\n    },\r\n\r\n    update: function () {\r\n        if (this.currentTime)\r\n            this.currentTime.string = parseFloat(this.videoPlayer.currentTime.toFixed(2));\r\n    }\r\n\r\n});\r\n"]}