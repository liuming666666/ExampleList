{"version":3,"sources":["IAP.js"],"names":["SuspensionTips","require","cc","Class","extends","properties","start","hasSupport","iapPlugin","anysdk","agentManager","getIAPPlugin","setListener","onPayResult","payForProduct","init","showTips","info","getOrderId","orderId","code","msg","log","PayResultCode","kPaySuccess","console","kPayCancel","kPayFail","kPayNetworkError","kPayProductionInforIncomplete","kPayInitSuccess","kPayInitFail","kPayNowPaying"],"mappings":";;;;;;AAAA,IAAMA,iBAAiBC,QAAQ,gBAAR,CAAvB;AACAC,GAAGC,KAAH,CAAS;AACLC,aAASH,QAAQ,mBAAR,CADJ;;AAGLI,gBAAY,EAHP;;AAKLC,WAAO,iBAAY;AACf,YAAI,KAAKC,UAAL,EAAJ,EAAuB;AACnB,iBAAKC,SAAL,GAAiBC,OAAOC,YAAP,CAAoBC,YAApB,EAAjB;AACA,gBAAI,KAAKH,SAAT,EAAoB;AAChB,qBAAKA,SAAL,CAAeI,WAAf,CAA2B,KAAKC,WAAhC,EAA6C,IAA7C;AACH;AACJ;AACJ,KAZI;;AAcLC,mBAAe,yBAAY;AACvB,YAAI,CAAC,KAAKN,SAAV,EAAqB;AACjBR,2BAAee,IAAf,CAAoBC,QAApB,CAA6B,0BAA7B;AACA;AACH;AACD,YAAIC,OAAO;AACP,0BAAc,QADP,EACoC;AAC3C,4BAAgB,cAFT,EAEoC;AAC3C,6BAAiB,KAHV,EAGoC;AAC3C,6BAAiB,GAJV,EAIoC;AAC3C,4BAAgB,cALT,EAKoC;AAC3C,yBAAa,OANN,EAMoC;AAC3C,yBAAa,GAPN,EAOoC;AAC3C,uBAAW,IARJ,EAQa;AACpB,yBAAa,MATN,EASmC;AAC1C,0BAAc,GAVP,EAUoC;AAC3C,4BAAgB,GAXT,EAWe;AACtB,yBAAa,GAZN,EAYoC;AAC3C,0BAAc,MAbP,EAaoC;AAC3C,yBAAa,GAdN,EAcoC;AAC3C,2BAAe,GAfR,EAeoC;AAC3C,mBAAO,eAhBA,CAgBoC;AAhBpC,SAAX;AAkBA,aAAKT,SAAL,CAAeM,aAAf,CAA6BG,IAA7B;AACH,KAtCI;;AAwCLC,gBAAY,sBAAY;AACpB,YAAI,CAAC,KAAKV,SAAV,EAAqB;AACjBR,2BAAee,IAAf,CAAoBC,QAApB,CAA6B,0BAA7B;AACA;AACH;AACD,YAAIG,UAAU,KAAKX,SAAL,CAAeU,UAAf,EAAd;AACAlB,uBAAee,IAAf,CAAoBC,QAApB,CAA6B,mBAAmBG,OAAhD;AACH,KA/CI;;AAiDLN,iBAAa,qBAAUO,IAAV,EAAgBC,GAAhB,EAAqB;AAC9BnB,WAAGoB,GAAH,CAAO,kCAAkCF,IAAlC,GAAyC,QAAzC,GAAoDC,GAA3D;AACA,gBAAQD,IAAR;AACI,iBAAKX,OAAOc,aAAP,CAAqBC,WAA1B;AAAsC;AAClCC,wBAAQH,GAAR,CAAY,eAAZ;AACA;AACJ,iBAAKb,OAAOc,aAAP,CAAqBG,UAA1B;AAAqC;AACjCD,wBAAQH,GAAR,CAAY,cAAZ;AACA;AACJ,iBAAKb,OAAOc,aAAP,CAAqBI,QAA1B,CAPJ,CAOuC;AACnC,iBAAKlB,OAAOc,aAAP,CAAqBK,gBAA1B,CARJ,CAQ+C;AAC3C,iBAAKnB,OAAOc,aAAP,CAAqBM,6BAA1B;AAAwD;AACpDJ,wBAAQH,GAAR,CAAY,YAAZ;AACA;AACJ,iBAAKb,OAAOc,aAAP,CAAqBO,eAA1B;AAA0C;AACtCL,wBAAQH,GAAR,CAAY,mBAAZ;AACA;AACJ,iBAAKb,OAAOc,aAAP,CAAqBQ,YAA1B;AAAuC;AACnCN,wBAAQH,GAAR,CAAY,gBAAZ;AACA;AACJ,iBAAKb,OAAOc,aAAP,CAAqBS,aAA1B;AAAwC;AACpCP,wBAAQH,GAAR,CAAY,iBAAZ;AACA;AACJ;AACI;AAtBR;AAwBH;AA3EI,CAAT","file":"IAP.js","sourceRoot":"../../../../../../assets/cases/anysdk/02_iap","sourcesContent":["const SuspensionTips = require('SuspensionTips');\ncc.Class({\n    extends: require('BaseAnySDKExample'),\n\n    properties: {},\n\n    start: function () {\n        if (this.hasSupport()) {\n            this.iapPlugin = anysdk.agentManager.getIAPPlugin();\n            if (this.iapPlugin) {\n                this.iapPlugin.setListener(this.onPayResult, this);\n            }\n        }\n    },\n\n    payForProduct: function () {\n        if (!this.iapPlugin) {\n            SuspensionTips.init.showTips(' this.iapPlugin is null ');\n            return;\n        }\n        var info = {\n            'Product_Id': '107196',                    //商品唯一标示符\n            'Product_Name': 'three hearts',            //商品名称\n            'Product_Price': '0.1',                    //商品单价\n            'Product_Count': '1',                      //商品数量\n            'Product_Desc': 'three hearts',            //商品描述 \n            'Coin_Name': 'heart',                      //虚拟币名称\n            'Coin_Rate': '3',                          //虚拟币兑换率\n            'Role_Id': \"id\",    //角色唯一标示符\n            'Role_Name': 'name',                      //角色名称\n            'Role_Grade': '1',                         //角色等级\n            'Role_Balance': \"1\",  //虚拟币余额\n            'Vip_Level': '0',                          //VIP等级\n            'Party_Name': 'null',                      //工会名称\n            'Server_Id': '1',                          //服务器唯一标示符\n            'Server_Name': '1',                        //服务器名称\n            'EXT': 'Cocos Creator'                     //扩展字段\n        };\n        this.iapPlugin.payForProduct(info);\n    },\n\n    getOrderId: function () {\n        if (!this.iapPlugin) {\n            SuspensionTips.init.showTips(' this.iapPlugin is null ');\n            return;\n        }\n        var orderId = this.iapPlugin.getOrderId();\n        SuspensionTips.init.showTips(' getOrderId : ' + orderId);\n    },\n\n    onPayResult: function (code, msg) {\n        cc.log(' PAY RESULT ########## code: ' + code + ',msg: ' + msg);\n        switch (code) {\n            case anysdk.PayResultCode.kPaySuccess:// 支付系统支付成功\n                console.log(' kPaySuccess ');\n                break;\n            case anysdk.PayResultCode.kPayCancel:// 支付系统支付取消\n                console.log(' kPayCancel ');\n                break;\n            case anysdk.PayResultCode.kPayFail:// 支付系统支付失败\n            case anysdk.PayResultCode.kPayNetworkError:// 支付系统网络错误\n            case anysdk.PayResultCode.kPayProductionInforIncomplete:// 支付系统支付信息不完整\n                console.log(' kPayFail ');\n                break;\n            case anysdk.PayResultCode.kPayInitSuccess:// 支付系统初始化成功\n                console.log(' kPayInitSuccess ');\n                break;\n            case anysdk.PayResultCode.kPayInitFail:// 支付系统初始化失败\n                console.log(' kPayInitFail ');\n                break;\n            case anysdk.PayResultCode.kPayNowPaying:// 支付系统正在支付中\n                console.log(' kPayNowPaying ');\n                break;\n            default:\n                break;\n        }\n    }\n});\n"]}