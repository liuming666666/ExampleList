{"version":3,"sources":["scheduleCallbacks.js"],"names":["i18n","require","cc","Class","extends","Component","properties","time","default","_callback","node","stopAllActions","runAction","seq","repeat","counting","counter","textKey","toFixed","onLoad","squashAction","scaleTo","stretchAction","scaleBackAction","moveUpAction","moveBy","p","easing","easeCubicActionOut","moveDownAction","easeCubicActionIn","sequence","find","getComponent","Label","update","dt","stopCounting","unscheduleAllCallbacks","t","repeatSchedule","schedule","oneSchedule","scheduleOnce","cancelSchedules"],"mappings":"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","file":"scheduleCallbacks.js","sourceRoot":"../../../../../../assets/cases/05_scripting/04_scheduler","sourcesContent":["const i18n = require('i18n');\n\ncc.Class({\n    extends: cc.Component,\n    \n    properties: {\n        time: {\n            default: 5\n        }\n    },\n    \n    _callback: function () {\n        this.node.stopAllActions();\n        this.node.runAction(this.seq);\n        if (this.repeat) {\n            this.counting = true;\n        }\n        else {\n            this.counting = false;\n        }\n        this.time = 5;\n        this.counter.textKey = this.time.toFixed(2) + ' s';\n    },\n\n    // use this for initialization\n    onLoad: function () {\n        var squashAction = cc.scaleTo(0.2, 1, 0.6);\n        var stretchAction = cc.scaleTo(0.2, 1, 1.2);\n        var scaleBackAction = cc.scaleTo(0.1, 1, 1);\n        var moveUpAction = cc.moveBy(1, cc.p(0, 100)).easing(cc.easeCubicActionOut());\n        var moveDownAction = cc.moveBy(1, cc.p(0, -100)).easing(cc.easeCubicActionIn());\n        this.seq = cc.sequence(squashAction,\n                               stretchAction,\n                               moveUpAction,\n                               scaleBackAction,\n                               moveDownAction,\n                               squashAction,\n                               scaleBackAction);\n                               \n        this.counter = cc.find('Canvas/count_label').getComponent(cc.Label);\n        this.counter.textKey = this.time.toFixed(2) + ' s';\n        this.counting = false;\n        this.repeat = false;\n    },\n\n    // called every frame\n    update: function (dt) {\n        if (this.counting) {\n            this.time -= dt;\n            this.counter.textKey = this.time.toFixed(2) + ' s';\n        }\n    },\n    \n    stopCounting: function () {\n        this.unscheduleAllCallbacks();\n        this.counting = false;\n        this.counter.textKey = i18n.t(\"cases/05_scripting/04_scheduler/scheduleCallbacks.js.1\");\n        this.time = 5;\n    },\n    \n    repeatSchedule: function () {\n        this.stopCounting();\n        this.schedule(this._callback, 5);\n        this.repeat = true;\n        this.counting = true;\n    },\n    \n    oneSchedule: function () {\n        this.stopCounting();\n        this.scheduleOnce(this._callback, 5);\n        this.repeat = false;\n        this.counting = true;\n    },\n    \n    cancelSchedules: function () {\n        this.repeat = false;\n        this.stopCounting();\n    }\n});\n"]}